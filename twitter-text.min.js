var TwitterText=(function(){var j={};var e={};var c="!'#%&'()*+,\\-./:;<=>?@\\[/\\]^_{|}~";e.spaces=new RegExp("\\s");e.at_signs=new RegExp("[@＠]");e.extract_mentions=new RegExp("(^|[^a-zA-Z0-9_])"+e.at_signs.source+"([a-zA-Z0-9_]{1,20})(?=(.|$))","g");e.extract_reply=new RegExp("^(?:"+e.spaces.source+")*"+e.at_signs.source+"([a-zA-Z0-9_]{1,20})","g");e.list_name=/^[a-zA-Z\x80-\xff].{0,79}$/;var h="ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþ\\303\\277";var n="[a-z0-9_"+h+"]";e.auto_link_hashtags=new RegExp("(^|[^0-9A-Z&\\/]+)(#|＃)([0-9A-Z_]*[A-Z_]+"+n+"*)","ig");e.auto_link_usernames_or_lists=/([^a-zA-Z0-9_]|^)([@＠]+)([a-zA-Z0-9_]{1,20})(\/[a-zA-Z][a-zA-Z0-9\x80-\xff\-]{0,79})?/;e.auto_link_emoticon=/(8\-\#|8\-E|\+\-\(|\`\@|\`O|\&lt;\|:~\(|\}:o\{|:\-\[|\&gt;o\&lt;|X\-\/|\[:-\]\-I\-|\/\/\/\/Ö\\\\\\\\|\(\|:\|\/\)|∑:\*\)|\( \| \))/;e.valid_preceding_chars=new RegExp("(?:[^\\/\"':!=]|^|\\:)","ig");e.valid_domain=new RegExp("(?:[^"+c+"\\s][.-](?=[^"+c+"\\s])|[^"+c+"\\s]){1,}\\.[a-z]{2,}(?::[0-9]+)?","ig");e.valid_url_path_chars=new RegExp("(?:[.,]?[a-z0-9!*'();:=+$/%#\\[\\]\\-_,~@])","ig");e.valid_url_path_ending_chars=new RegExp("[a-z0-9)=#/]","ig");e.valid_url_query_chars=new RegExp("[a-z0-9!*'();:&=+$/%#\\[\\]\\-_.,~]","ig");e.valid_url_query_ending_chars=new RegExp("[a-z0-9_&=#]","ig");var a="(       ("+e.valid_preceding_chars.source+")       (         (https?:\\/\\/|www\\.)         ("+e.valid_domain.source+")         (/"+e.valid_url_path_chars.source+"*"+e.valid_url_path_ending_chars.source+"?)?         (\\?"+e.valid_url_query_chars.source+"*"+e.valid_url_query_ending_chars.source+")?         )     )";e.valid_url=new RegExp(a.replace(/[\s]/g,""),"gi");var f=/www\./i;var i="tweet-url";var b="list-slug";var d="username";var g="hashtag";var m=' rel="nofollow"';var l=function(p){var o="";for(attr in p){if(p[attr]){o+=" "+attr+'="'+p[attr]+'"'}}return o};var k=function(p){var o={};for(key in p){o[key]=p[key]}return o};j.auto_link=function(p,o){return this.auto_link_usernames_or_lists(this.auto_link_urls_custom(this.auto_link_hashtags(p,o),o),o)};j.auto_link_usernames_or_lists=function(s,o,q){options=k(o);options.url_class=options.url_class||i;options.list_class=options.list_class||b;options.username_class=options.username_class||d;options.username_url_base=options.username_url_base||"http://twitter.com/";options.list_url_base=options.list_url_base||"http://twitter.com/";var t="";if(!options.suppress_no_follow){t=m}var p=s.replace(e.auto_link_usernames_or_lists,function(v,z,y,x,w,r,B){if(w&&!options.suppress_lists){var A=x+w;var u=A;if(q){A=q(u)}return z+y+'<a class="'+options.url_class+" "+options.list_class+'" href="'+options.list_url_base+u+'"'+t+">"+A+"</a>"}else{var A=x;if(q){A=q(s)}return z+y+'<a class="'+options.url_class+" "+options.username_class+'" href="'+options.username_url_base+A+'"'+t+">"+A+"</a>"}});return p};j.auto_link_urls_custom=function(s,p){var o=k(p);if(!o.suppress_no_follow){o.rel="nofollow"}else{o.suppress_no_follow=null}var q=s.replace(e.valid_url,function(v,y,w,r,z,x,u,B){var A=l(o);var t;if(z.match(f)){t="http://"+r}else{t=r}return w+'<a href="'+t+'"'+A+">"+r+"</a>"});return q};j.auto_link_hashtags=function(t,p,s){var o=k(p);o.url_class=o.url_class||i;o.hashtag_class=o.hashtag_class||g;o.hashtag_url_base=o.hashtag_url_base||"http://twitter.com/search?q=%23";var u="";if(!o.suppress_no_follow){u=m}var q=t.replace(e.auto_link_hashtags,function(z,v,w,y,x,r){if(s){y=s(y)}return v+'<a href="'+o.hashtag_url_base+y+'" title="#'+y+'" class="'+o.url_class+" "+o.hashtag_class+'"'+u+">"+w+y+"</a>"});return q};j.extract_mentioned_screen_names=function(r,q){if(!r){return[]}var p=[];r.replace(e.extract_mentions,function(w,s,v,u,t){if(!u.match(e.at_signs)){p.push(v)}});if(q){for(var o=0;o<p.length;o++){q(p[o])}}return p};j.extract_reply_screen_name=function(q,o){if(!q){return null}var p=null;q.replace(e.extract_reply,function(s,t,r){p=t;if(o){o(p)}});return p};j.extract_urls=function(r,p){if(!r){return[]}var q=[];r.replace(e.valid_url,function(w,z,x,t,A,y,v,B){var u;if(A.match(f)){u="http://"+t}else{u=t}q.push(u)});if(p){for(var o=0;o<q.length;o++){p(q[o])}}return q};j.extract_hashtags=function(r,q){if(!r){return[]}var o=[];r.replace(e.auto_link_hashtags,function(v,t,u,s){o.push(s)});if(q){for(var p=0;p<o.length;p++){q(o[p])}}return o};j.printUnicodeSpaces=function(){console.log(this.unicode_spaces)};j.regexes=e;return j}());